type WatchlistItem @model
  @key(fields: ["userId", "showId"]) {
  userId: ID!
  showId: ID!
  show: Show @connection(fields: ["showId"])
}

type User @model
  @key(fields: ["id"]) {
  id: ID!
  name: String!
  watchlist: [WatchlistItem] @connection(fields: ["id"])
}

type Review @model
  @key(fields: ["showId", "userId"])
  @key(name: "byShow", fields: ["showId", "rating"], queryField: "byShow") {
  showId: ID!
  userId: ID!
  rating: Int!
  isFavorite: Boolean
  user: User @connection(fields: ["userId"])
}

enum ShowType {
  tv
  movie
}

type Show @model
  @algolia(fields: { include: ["title", "type", "year"] })
  @key(fields: ["id"])
  @key(name: "showsByDate", fields: ["source", "createdAt"], queryField: "showsByDate")
  @key(name: "showsByType", fields: ["type", "createdAt"], queryField: "showsByType") {
  id: ID!
  title: String!
  type: ShowType!
  rating: Float!
  img: String
  year: Int
  description: String
  imdbRating: Float
  rtRating: Int
  reviews: [Review] @connection(fields: ["id"])
  createdAt: AWSDateTime
  source: String!
}